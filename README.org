* idar @@html:<img src='man/figures/logo.png' align="right" height="139" />@@

#+ATTR_HTML: title="Travis hdpGLM"
[[https://travis-ci.org/DiogoFerrari/hdpGLM][file:https://travis-ci.org/DiogoFerrari/idar.svg]]

* Overview

The ~idar~ package implements a end-to-end estimation of structural causal models (SCM), from the specification of the data generating process (DGP) using a directed acyclic graph (DAGs) to identification analysis, selection of adjustment variables (selection on observables), estimation of causal effects, and estimation results summary and plotting.

Most of the functions of the ~idar~ package work as an envelop other functionalities that are distributed in various other R packages, including [[http://www.dagitty.net/][dagitty]] to with with directed acyclic graphs (DAGs), [[https://cran.r-project.org/web/packages/dosearch/index.html][dosearch]] for identification analysis, [[https://ggdag.malco.io/index.html][ggdag]] for visualization of DAGs, and [[https://lavaan.ugent.be/][lavaan]] for estimation of structural equation models (SEM).

* Instalation

# Install the development version (requires the package "devtools", so install it first if it is not installed already)

#+BEGIN_SRC R :exports code
devtools::install_github("DiogoFerrari/idar")
# If you don't want to update the dependencies, use: (you may need to install some dependencies manually)
devtools::install_github("DiogoFerrari/idar", dependencies=F)
#+END_SRC

NOTE: it may be necessary to create a token to install the package from the git repository in case it is private (see note at the bottom of help page in R by running =help(install_github)=).

* Usage

Here is a simple example (for more information, see =help(idar)=).

#+NAME: 
#+BEGIN_SRC R :exports code

## Use a DAG to encode the DGP
dag = '
U -> X
U -> Y
X -> Z -> Y
X -> Z -> X2 -> Y
X -> X3 -> Y
U [pos="1,1", unobserved]
X [pos="0,0"]
X2 [pos="1.5,-1"]
X3 [pos=".5,-1"]
Z [pos="1,0"]
Y [pos="2,0"]
'

## simulate data (for demonstration)
df=simulateDAGdata(dag, seed=1)

## identification analysis
identification('X', 'Y', dag)
identification('X', 'Y', dag, plot=T) # generate a plot
## estimation of the SCM
fit=estimate(cause='X', effect='Y', dag, df)
print(fit)

## plots
plot(fit)
plot_identification('X', 'Y', dag, T, T, fit=fit)

globalfit(fit)
localfit(fit)

#+END_SRC

